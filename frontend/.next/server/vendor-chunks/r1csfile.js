"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/r1csfile";
exports.ids = ["vendor-chunks/r1csfile"];
exports.modules = {

/***/ "(rsc)/../backend/node_modules/r1csfile/src/r1csfile.js":
/*!********************************************************!*\
  !*** ../backend/node_modules/r1csfile/src/r1csfile.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   R1CS_FILE_CONSTRAINTS_SECTION: () => (/* binding */ R1CS_FILE_CONSTRAINTS_SECTION),\n/* harmony export */   R1CS_FILE_CUSTOM_GATES_LIST_SECTION: () => (/* binding */ R1CS_FILE_CUSTOM_GATES_LIST_SECTION),\n/* harmony export */   R1CS_FILE_CUSTOM_GATES_USES_SECTION: () => (/* binding */ R1CS_FILE_CUSTOM_GATES_USES_SECTION),\n/* harmony export */   R1CS_FILE_HEADER_SECTION: () => (/* binding */ R1CS_FILE_HEADER_SECTION),\n/* harmony export */   R1CS_FILE_WIRE2LABELID_SECTION: () => (/* binding */ R1CS_FILE_WIRE2LABELID_SECTION),\n/* harmony export */   readConstraints: () => (/* binding */ readConstraints),\n/* harmony export */   readCustomGatesListSection: () => (/* binding */ readCustomGatesListSection),\n/* harmony export */   readCustomGatesUsesSection: () => (/* binding */ readCustomGatesUsesSection),\n/* harmony export */   readMap: () => (/* binding */ readMap),\n/* harmony export */   readR1cs: () => (/* binding */ readR1cs),\n/* harmony export */   readR1csFd: () => (/* binding */ readR1csFd),\n/* harmony export */   readR1csHeader: () => (/* binding */ readR1csHeader),\n/* harmony export */   writeR1cs: () => (/* binding */ writeR1cs),\n/* harmony export */   writeR1csConstraints: () => (/* binding */ writeR1csConstraints),\n/* harmony export */   writeR1csHeader: () => (/* binding */ writeR1csHeader),\n/* harmony export */   writeR1csMap: () => (/* binding */ writeR1csMap)\n/* harmony export */ });\n/* harmony import */ var ffjavascript__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ffjavascript */ \"(rsc)/../backend/node_modules/ffjavascript/main.js\");\n/* harmony import */ var _iden3_bigarray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @iden3/bigarray */ \"(rsc)/../backend/node_modules/@iden3/bigarray/src/bigarray.js\");\n/* harmony import */ var _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @iden3/binfileutils */ \"(rsc)/../backend/node_modules/@iden3/binfileutils/src/binfileutils.js\");\n\n\n\n\nconst R1CS_FILE_HEADER_SECTION = 1;\nconst R1CS_FILE_CONSTRAINTS_SECTION = 2;\nconst R1CS_FILE_WIRE2LABELID_SECTION = 3;\nconst R1CS_FILE_CUSTOM_GATES_LIST_SECTION = 4;\nconst R1CS_FILE_CUSTOM_GATES_USES_SECTION = 5;\n\nasync function readR1csHeader(fd,sections,singleThread) {\n    let options;\n    if (typeof singleThread === \"object\") {\n        options = singleThread;\n    } else if (typeof singleThread === \"undefined\") {\n        options= {\n            singleThread: false,\n        };\n    } else {\n        options = {\n            singleThread: singleThread,\n        };\n    }\n\n    const res = {};\n    await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.startReadUniqueSection(fd, sections, 1);\n    // Read Header\n    res.n8 = await fd.readULE32();\n    res.prime = await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.readBigInt(fd, res.n8);\n\n    if (options.F) {\n        if (options.F.p != res.prime) throw new Error(\"Different Prime\");\n        res.F = options.F;\n    } else if (options.getFieldFromPrime) {\n        res.F = await options.getFieldFromPrime(res.prime, options.singleThread);\n    } else if (options.getCurveFromPrime) {\n        res.curve = await options.getCurveFromPrime(res.prime, options.singleThread);\n        res.F = res.curve.Fr;\n    } else {\n        try {\n            res.curve = await (0,ffjavascript__WEBPACK_IMPORTED_MODULE_0__.getCurveFromR)(res.prime, options.singleThread);\n            res.F = res.curve.Fr;\n        } catch (err) {\n            res.F = new ffjavascript__WEBPACK_IMPORTED_MODULE_0__.F1Field(res.prime);\n        }\n    }\n\n    res.nVars = await fd.readULE32();\n    res.nOutputs = await fd.readULE32();\n    res.nPubInputs = await fd.readULE32();\n    res.nPrvInputs = await fd.readULE32();\n    res.nLabels = await fd.readULE64();\n    res.nConstraints = await fd.readULE32();\n    res.useCustomGates = typeof sections[R1CS_FILE_CUSTOM_GATES_LIST_SECTION] !== \"undefined\" && sections[R1CS_FILE_CUSTOM_GATES_LIST_SECTION] !== null\n        && typeof sections[R1CS_FILE_CUSTOM_GATES_USES_SECTION] !== \"undefined\" && sections[R1CS_FILE_CUSTOM_GATES_USES_SECTION] !== null;\n\n    await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.endReadSection(fd);\n\n    return res;\n}\n\nasync function readConstraints(fd,sections, r1cs, logger, loggerCtx) {\n    let options;\n    if (typeof logger === \"object\") {\n        options = logger;\n    } else if (typeof logger === \"undefined\") {\n        options= {};\n    } else {\n        options = {\n            logger: logger,\n            loggerCtx: loggerCtx,\n        };\n    }\n\n    const bR1cs = await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.readSection(fd, sections, 2);\n    let bR1csPos = 0;\n    let constraints;\n    if (r1cs.nConstraints>1<<20) {\n        constraints = new _iden3_bigarray__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n    } else {\n        constraints = [];\n    }\n    for (let i=0; i<r1cs.nConstraints; i++) {\n        if ((options.logger)&&(i%100000 == 0)) options.logger.info(`${options.loggerCtx}: Loading constraints: ${i}/${r1cs.nConstraints}`);\n        const c = readConstraint();\n        constraints.push(c);\n    }\n    return constraints;\n\n\n    function readConstraint() {\n        const c = [];\n        c[0] = readLC();\n        c[1] = readLC();\n        c[2] = readLC();\n        return c;\n    }\n\n    function readLC() {\n        const lc= {};\n\n        const buffUL32 = bR1cs.slice(bR1csPos, bR1csPos+4);\n        bR1csPos += 4;\n        const buffUL32V = new DataView(buffUL32.buffer);\n        const nIdx = buffUL32V.getUint32(0, true);\n\n        const buff = bR1cs.slice(bR1csPos, bR1csPos + (4+r1cs.n8)*nIdx );\n        bR1csPos += (4+r1cs.n8)*nIdx;\n        const buffV = new DataView(buff.buffer);\n        for (let i=0; i<nIdx; i++) {\n            const idx = buffV.getUint32(i*(4+r1cs.n8), true);\n            const val = r1cs.F.fromRprLE(buff, i*(4+r1cs.n8)+4);\n            lc[idx] = val;\n        }\n        return lc;\n    }\n}\n\nasync function readMap(fd, sections, r1cs, logger, loggerCtx) {\n    let options;\n    if (typeof logger === \"object\") {\n        options = logger;\n    } else if (typeof logger === \"undefined\") {\n        options= {};\n    } else {\n        options = {\n            logger: logger,\n            loggerCtx: loggerCtx,\n        };\n    }\n    const bMap = await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.readSection(fd, sections, 3);\n    let bMapPos = 0;\n    let map;\n\n    if (r1cs.nVars>1<<20) {\n        map = new _iden3_bigarray__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n    } else {\n        map = [];\n    }\n    for (let i=0; i<r1cs.nVars; i++) {\n        if ((options.logger)&&(i%10000 == 0)) options.logger.info(`${options.loggerCtx}: Loading map: ${i}/${r1cs.nVars}`);\n        const idx = readULE64();\n        map.push(idx);\n    }\n\n    return map;\n\n    function readULE64() {\n        const buffULE64 = bMap.slice(bMapPos, bMapPos+8);\n        bMapPos += 8;\n        const buffULE64V = new DataView(buffULE64.buffer);\n        const LSB = buffULE64V.getUint32(0, true);\n        const MSB = buffULE64V.getUint32(4, true);\n\n        return MSB * 0x100000000 + LSB;\n    }\n\n}\n\nasync function readR1csFd(fd, sections, options) {\n    /**\n     * Options properties:\n     *  loadConstraints: <bool> true by default\n     *  loadMap:         <bool> false by default\n     *  loadCustomGates: <bool> true by default\n     */\n\n    if(typeof options !== \"object\") {\n        throw new Error(\"readR1csFd: options must be an object\");\n    }\n\n    options.loadConstraints = \"loadConstraints\" in options ? options.loadConstraints : true;\n    options.loadMap = \"loadMap\" in options ? options.loadMap : false;\n    options.loadCustomGates = \"loadCustomGates\" in options ? options.loadCustomGates : true;\n\n    const res = await readR1csHeader(fd, sections, options);\n\n    if (options.loadConstraints) {\n        res.constraints = await readConstraints(fd, sections, res, options);\n    }\n\n    // Read Labels\n\n    if (options.loadMap) {\n        res.map = await readMap(fd, sections, res, options);\n    }\n\n    if (options.loadCustomGates) {\n        if (res.useCustomGates) {\n            res.customGates = await readCustomGatesListSection(fd, sections, res);\n            res.customGatesUses = await readCustomGatesUsesSection(fd, sections, options);\n        } else {\n            res.customGates = [];\n            res.customGatesUses = [];\n        }\n    }\n    return res;\n}\n\nasync function readR1cs(fileName, loadConstraints, loadMap, singleThread, logger, loggerCtx) {\n    let options;\n    if (typeof loadConstraints === \"object\") {\n        options = loadConstraints;\n    } else if (typeof loadConstraints === \"undefined\") {\n        options= {\n            loadConstraints: true,\n            loadMap: false,\n            loadCustomGates: true\n        };\n    } else {\n        options = {\n            loadConstraints: loadConstraints,\n            loadMap: loadMap,\n            singleThread: singleThread,\n            logger: logger,\n            loggerCtx: loggerCtx\n        };\n    }\n\n    const {fd, sections} = await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.readBinFile(fileName, \"r1cs\", 1, 1<<25, 1<<22);\n\n    const res = await readR1csFd(fd, sections, options);\n\n    await fd.close();\n\n    return res;\n}\n\nasync function readCustomGatesListSection(fd, sections, res) {\n    await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.startReadUniqueSection(fd, sections, R1CS_FILE_CUSTOM_GATES_LIST_SECTION);\n\n    let num = await fd.readULE32();\n\n    let customGates = [];\n    for (let i = 0; i < num; i++) {\n        let customGate = {};\n        customGate.templateName = await fd.readString();\n        let numParameters = await fd.readULE32();\n\n        customGate.parameters = Array(numParameters);\n        let buff = await fd.read(res.n8 * numParameters);\n\n        for (let j = 0; j < numParameters; j++) {\n            customGate.parameters[j] = res.F.fromRprLE(buff, j * res.n8, res.n8);;\n        }\n        customGates.push(customGate);\n    }\n    await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.endReadSection(fd);\n\n    return customGates;\n}\n\nasync function readCustomGatesUsesSection(fd,sections, options) {\n    const bR1cs = await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.readSection(fd, sections, R1CS_FILE_CUSTOM_GATES_USES_SECTION);\n    const bR1cs32 = new Uint32Array(bR1cs.buffer, bR1cs.byteOffset, bR1cs.byteLength/4);\n    const nCustomGateUses = bR1cs32[0];\n    let bR1csPos = 1;\n    let customGatesUses;\n    if (nCustomGateUses>1<<20) {\n        customGatesUses = new _iden3_bigarray__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n    } else {\n        customGatesUses = [];\n    }\n    for (let i=0; i<nCustomGateUses; i++) {\n        if ((options.logger)&&(i%100000 == 0)) options.logger.info(`${options.loggerCtx}: Loading custom gate uses: ${i}/${nCustomGateUses}`);\n        let c = {};\n        c.id = bR1cs32[bR1csPos++];\n        let numSignals = bR1cs32[bR1csPos++];\n        c.signals = [];\n        for (let j = 0; j < numSignals; j++) {\n            const LSB = bR1cs32[bR1csPos++];\n            const MSB = bR1cs32[bR1csPos++];\n            c.signals.push(MSB * 0x100000000 + LSB);\n        }\n        customGatesUses.push(c);\n    }\n    return customGatesUses;\n}\n\nasync function writeR1csHeader(fd, cir) {\n    await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.startWriteSection(fd, 1);\n    await fd.writeULE32(cir.n8); // Temporally set to 0 length\n    await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.writeBigInt(fd, cir.prime, cir.n8);\n\n    await fd.writeULE32(cir.nVars);\n    await fd.writeULE32(cir.nOutputs);\n    await fd.writeULE32(cir.nPubInputs);\n    await fd.writeULE32(cir.nPrvInputs);\n    await fd.writeULE64(cir.nLabels);\n    await fd.writeULE32(cir.constraints.length);\n\n    await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.endWriteSection(fd);\n}\n\nasync function writeR1csConstraints(fd, cir, logger, loggerCtx) {\n    await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.startWriteSection(fd, 2);\n\n    for (let i=0; i<cir.constraints.length; i++) {\n        if ((logger)&&(i%10000 == 0)) logger.info(`${loggerCtx}: writing constraint: ${i}/${cir.constraints.length}`);\n        await writeConstraint(cir.constraints[i]);\n    }\n\n    await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.endWriteSection(fd);\n\n\n    function writeConstraint(c) {\n        const n8 = cir.n8;\n        const F = cir.F || cir.curve.Fr;\n        const idxA = Object.keys(c[0]);\n        const idxB = Object.keys(c[1]);\n        const idxC = Object.keys(c[2]);\n        const buff = new Uint8Array((idxA.length+idxB.length+idxC.length)*(n8+4) + 12);\n        const buffV = new DataView(buff.buffer);\n        let o=0;\n\n        buffV.setUint32(o, idxA.length, true); o+=4;\n        for (let i=0; i<idxA.length; i++) {\n            const coef = idxA[i];\n            buffV.setUint32(o, coef, true); o+=4;\n            F.toRprLE(buff, o, c[0][coef]); o+=n8;\n        }\n\n        buffV.setUint32(o, idxB.length, true); o+=4;\n        for (let i=0; i<idxB.length; i++) {\n            const coef = idxB[i];\n            buffV.setUint32(o, coef, true); o+=4;\n            F.toRprLE(buff, o, c[1][coef]); o+=n8;\n        }\n\n        buffV.setUint32(o, idxC.length, true); o+=4;\n        for (let i=0; i<idxC.length; i++) {\n            const coef = idxC[i];\n            buffV.setUint32(o, coef, true); o+=4;\n            F.toRprLE(buff, o, c[2][coef]); o+=n8;\n        }\n\n        return fd.write(buff);\n    }\n\n}\n\n\nasync function writeR1csMap(fd, cir, logger, loggerCtx) {\n    await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.startWriteSection(fd, 3);\n\n    if (cir.map.length != cir.nVars) throw new Error(\"Invalid map size\");\n    for (let i=0; i<cir.nVars; i++) {\n        if ((logger)&&(i%10000 == 0)) logger.info(`${loggerCtx}: writing map: ${i}/${cir.nVars}`);\n        await fd.writeULE64(cir.map[i]);\n    }\n\n    await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.endWriteSection(fd);\n}\n\n\n\nasync function writeR1cs(fileName, cir, logger, loggerCtx) {\n\n    const fd = await _iden3_binfileutils__WEBPACK_IMPORTED_MODULE_2__.createBinFile(fileName, \"r1cs\", 1, 3, 1<<25, 1<<22);\n\n    await writeR1csHeader(fd, cir);\n\n    await writeR1csConstraints(fd, cir, logger, loggerCtx);\n\n    await writeR1csMap(fd, cir, logger, loggerCtx);\n\n    await fd.close();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vYmFja2VuZC9ub2RlX21vZHVsZXMvcjFjc2ZpbGUvc3JjL3IxY3NmaWxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0Q7QUFDWjtBQUNZOztBQUU3QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVUsdUVBQW1DO0FBQzdDO0FBQ0E7QUFDQSxzQkFBc0IsMkRBQXVCOztBQUU3QztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLDhCQUE4QiwyREFBYTtBQUMzQztBQUNBLFVBQVU7QUFDVix3QkFBd0IsaURBQU87QUFDL0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVUsK0RBQTJCOztBQUVyQztBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0JBQXdCLDREQUF3QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsdURBQVE7QUFDbEMsTUFBTTtBQUNOO0FBQ0E7QUFDQSxrQkFBa0IscUJBQXFCO0FBQ3ZDLHNFQUFzRSxrQkFBa0IseUJBQXlCLEVBQUUsR0FBRyxrQkFBa0I7QUFDeEk7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFFBQVE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw0REFBd0I7QUFDL0M7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQix1REFBUTtBQUMxQixNQUFNO0FBQ047QUFDQTtBQUNBLGtCQUFrQixjQUFjO0FBQ2hDLHFFQUFxRSxrQkFBa0IsaUJBQWlCLEVBQUUsR0FBRyxXQUFXO0FBQ3hIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXLGNBQWMsUUFBUSw0REFBd0I7O0FBRXpEOztBQUVBOztBQUVBO0FBQ0E7O0FBRU87QUFDUCxVQUFVLHVFQUFtQzs7QUFFN0M7O0FBRUE7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx3QkFBd0IsbUJBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwrREFBMkI7O0FBRXJDO0FBQ0E7O0FBRU87QUFDUCx3QkFBd0IsNERBQXdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsdURBQVE7QUFDdEMsTUFBTTtBQUNOO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDLHNFQUFzRSxrQkFBa0IsOEJBQThCLEVBQUUsR0FBRyxnQkFBZ0I7QUFDM0k7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0JBQWdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUCxVQUFVLGtFQUE4QjtBQUN4QyxpQ0FBaUM7QUFDakMsVUFBVSw0REFBd0I7O0FBRWxDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVLGdFQUE0QjtBQUN0Qzs7QUFFTztBQUNQLFVBQVUsa0VBQThCOztBQUV4QyxrQkFBa0IsMEJBQTBCO0FBQzVDLHFEQUFxRCxVQUFVLHdCQUF3QixFQUFFLEdBQUcsdUJBQXVCO0FBQ25IO0FBQ0E7O0FBRUEsVUFBVSxnRUFBNEI7OztBQUd0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0NBQStDO0FBQy9DLHNCQUFzQixlQUFlO0FBQ3JDO0FBQ0EsNENBQTRDO0FBQzVDLDRDQUE0QztBQUM1Qzs7QUFFQSwrQ0FBK0M7QUFDL0Msc0JBQXNCLGVBQWU7QUFDckM7QUFDQSw0Q0FBNEM7QUFDNUMsNENBQTRDO0FBQzVDOztBQUVBLCtDQUErQztBQUMvQyxzQkFBc0IsZUFBZTtBQUNyQztBQUNBLDRDQUE0QztBQUM1Qyw0Q0FBNEM7QUFDNUM7O0FBRUE7QUFDQTs7QUFFQTs7O0FBR087QUFDUCxVQUFVLGtFQUE4Qjs7QUFFeEM7QUFDQSxrQkFBa0IsYUFBYTtBQUMvQixxREFBcUQsVUFBVSxpQkFBaUIsRUFBRSxHQUFHLFVBQVU7QUFDL0Y7QUFDQTs7QUFFQSxVQUFVLGdFQUE0QjtBQUN0Qzs7OztBQUlPOztBQUVQLHFCQUFxQiw4REFBMEI7O0FBRS9DOztBQUVBOztBQUVBOztBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uLi9iYWNrZW5kL25vZGVfbW9kdWxlcy9yMWNzZmlsZS9zcmMvcjFjc2ZpbGUuanM/YzA5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0YxRmllbGQsIGdldEN1cnZlRnJvbVJ9IGZyb20gXCJmZmphdmFzY3JpcHRcIjtcbmltcG9ydCAgQmlnQXJyYXkgZnJvbSBcIkBpZGVuMy9iaWdhcnJheVwiO1xuaW1wb3J0ICogYXMgYmluRmlsZVV0aWxzIGZyb20gXCJAaWRlbjMvYmluZmlsZXV0aWxzXCI7XG5cbmV4cG9ydCBjb25zdCBSMUNTX0ZJTEVfSEVBREVSX1NFQ1RJT04gPSAxO1xuZXhwb3J0IGNvbnN0IFIxQ1NfRklMRV9DT05TVFJBSU5UU19TRUNUSU9OID0gMjtcbmV4cG9ydCBjb25zdCBSMUNTX0ZJTEVfV0lSRTJMQUJFTElEX1NFQ1RJT04gPSAzO1xuZXhwb3J0IGNvbnN0IFIxQ1NfRklMRV9DVVNUT01fR0FURVNfTElTVF9TRUNUSU9OID0gNDtcbmV4cG9ydCBjb25zdCBSMUNTX0ZJTEVfQ1VTVE9NX0dBVEVTX1VTRVNfU0VDVElPTiA9IDU7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkUjFjc0hlYWRlcihmZCxzZWN0aW9ucyxzaW5nbGVUaHJlYWQpIHtcbiAgICBsZXQgb3B0aW9ucztcbiAgICBpZiAodHlwZW9mIHNpbmdsZVRocmVhZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBvcHRpb25zID0gc2luZ2xlVGhyZWFkO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNpbmdsZVRocmVhZCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBvcHRpb25zPSB7XG4gICAgICAgICAgICBzaW5nbGVUaHJlYWQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBzaW5nbGVUaHJlYWQ6IHNpbmdsZVRocmVhZCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSB7fTtcbiAgICBhd2FpdCBiaW5GaWxlVXRpbHMuc3RhcnRSZWFkVW5pcXVlU2VjdGlvbihmZCwgc2VjdGlvbnMsIDEpO1xuICAgIC8vIFJlYWQgSGVhZGVyXG4gICAgcmVzLm44ID0gYXdhaXQgZmQucmVhZFVMRTMyKCk7XG4gICAgcmVzLnByaW1lID0gYXdhaXQgYmluRmlsZVV0aWxzLnJlYWRCaWdJbnQoZmQsIHJlcy5uOCk7XG5cbiAgICBpZiAob3B0aW9ucy5GKSB7XG4gICAgICAgIGlmIChvcHRpb25zLkYucCAhPSByZXMucHJpbWUpIHRocm93IG5ldyBFcnJvcihcIkRpZmZlcmVudCBQcmltZVwiKTtcbiAgICAgICAgcmVzLkYgPSBvcHRpb25zLkY7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmdldEZpZWxkRnJvbVByaW1lKSB7XG4gICAgICAgIHJlcy5GID0gYXdhaXQgb3B0aW9ucy5nZXRGaWVsZEZyb21QcmltZShyZXMucHJpbWUsIG9wdGlvbnMuc2luZ2xlVGhyZWFkKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZ2V0Q3VydmVGcm9tUHJpbWUpIHtcbiAgICAgICAgcmVzLmN1cnZlID0gYXdhaXQgb3B0aW9ucy5nZXRDdXJ2ZUZyb21QcmltZShyZXMucHJpbWUsIG9wdGlvbnMuc2luZ2xlVGhyZWFkKTtcbiAgICAgICAgcmVzLkYgPSByZXMuY3VydmUuRnI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlcy5jdXJ2ZSA9IGF3YWl0IGdldEN1cnZlRnJvbVIocmVzLnByaW1lLCBvcHRpb25zLnNpbmdsZVRocmVhZCk7XG4gICAgICAgICAgICByZXMuRiA9IHJlcy5jdXJ2ZS5GcjtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXMuRiA9IG5ldyBGMUZpZWxkKHJlcy5wcmltZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXMublZhcnMgPSBhd2FpdCBmZC5yZWFkVUxFMzIoKTtcbiAgICByZXMubk91dHB1dHMgPSBhd2FpdCBmZC5yZWFkVUxFMzIoKTtcbiAgICByZXMublB1YklucHV0cyA9IGF3YWl0IGZkLnJlYWRVTEUzMigpO1xuICAgIHJlcy5uUHJ2SW5wdXRzID0gYXdhaXQgZmQucmVhZFVMRTMyKCk7XG4gICAgcmVzLm5MYWJlbHMgPSBhd2FpdCBmZC5yZWFkVUxFNjQoKTtcbiAgICByZXMubkNvbnN0cmFpbnRzID0gYXdhaXQgZmQucmVhZFVMRTMyKCk7XG4gICAgcmVzLnVzZUN1c3RvbUdhdGVzID0gdHlwZW9mIHNlY3Rpb25zW1IxQ1NfRklMRV9DVVNUT01fR0FURVNfTElTVF9TRUNUSU9OXSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWN0aW9uc1tSMUNTX0ZJTEVfQ1VTVE9NX0dBVEVTX0xJU1RfU0VDVElPTl0gIT09IG51bGxcbiAgICAgICAgJiYgdHlwZW9mIHNlY3Rpb25zW1IxQ1NfRklMRV9DVVNUT01fR0FURVNfVVNFU19TRUNUSU9OXSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWN0aW9uc1tSMUNTX0ZJTEVfQ1VTVE9NX0dBVEVTX1VTRVNfU0VDVElPTl0gIT09IG51bGw7XG5cbiAgICBhd2FpdCBiaW5GaWxlVXRpbHMuZW5kUmVhZFNlY3Rpb24oZmQpO1xuXG4gICAgcmV0dXJuIHJlcztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRDb25zdHJhaW50cyhmZCxzZWN0aW9ucywgcjFjcywgbG9nZ2VyLCBsb2dnZXJDdHgpIHtcbiAgICBsZXQgb3B0aW9ucztcbiAgICBpZiAodHlwZW9mIGxvZ2dlciA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBvcHRpb25zID0gbG9nZ2VyO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxvZ2dlciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBvcHRpb25zPSB7fTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgbG9nZ2VyOiBsb2dnZXIsXG4gICAgICAgICAgICBsb2dnZXJDdHg6IGxvZ2dlckN0eCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBiUjFjcyA9IGF3YWl0IGJpbkZpbGVVdGlscy5yZWFkU2VjdGlvbihmZCwgc2VjdGlvbnMsIDIpO1xuICAgIGxldCBiUjFjc1BvcyA9IDA7XG4gICAgbGV0IGNvbnN0cmFpbnRzO1xuICAgIGlmIChyMWNzLm5Db25zdHJhaW50cz4xPDwyMCkge1xuICAgICAgICBjb25zdHJhaW50cyA9IG5ldyBCaWdBcnJheSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0cmFpbnRzID0gW107XG4gICAgfVxuICAgIGZvciAobGV0IGk9MDsgaTxyMWNzLm5Db25zdHJhaW50czsgaSsrKSB7XG4gICAgICAgIGlmICgob3B0aW9ucy5sb2dnZXIpJiYoaSUxMDAwMDAgPT0gMCkpIG9wdGlvbnMubG9nZ2VyLmluZm8oYCR7b3B0aW9ucy5sb2dnZXJDdHh9OiBMb2FkaW5nIGNvbnN0cmFpbnRzOiAke2l9LyR7cjFjcy5uQ29uc3RyYWludHN9YCk7XG4gICAgICAgIGNvbnN0IGMgPSByZWFkQ29uc3RyYWludCgpO1xuICAgICAgICBjb25zdHJhaW50cy5wdXNoKGMpO1xuICAgIH1cbiAgICByZXR1cm4gY29uc3RyYWludHM7XG5cblxuICAgIGZ1bmN0aW9uIHJlYWRDb25zdHJhaW50KCkge1xuICAgICAgICBjb25zdCBjID0gW107XG4gICAgICAgIGNbMF0gPSByZWFkTEMoKTtcbiAgICAgICAgY1sxXSA9IHJlYWRMQygpO1xuICAgICAgICBjWzJdID0gcmVhZExDKCk7XG4gICAgICAgIHJldHVybiBjO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlYWRMQygpIHtcbiAgICAgICAgY29uc3QgbGM9IHt9O1xuXG4gICAgICAgIGNvbnN0IGJ1ZmZVTDMyID0gYlIxY3Muc2xpY2UoYlIxY3NQb3MsIGJSMWNzUG9zKzQpO1xuICAgICAgICBiUjFjc1BvcyArPSA0O1xuICAgICAgICBjb25zdCBidWZmVUwzMlYgPSBuZXcgRGF0YVZpZXcoYnVmZlVMMzIuYnVmZmVyKTtcbiAgICAgICAgY29uc3QgbklkeCA9IGJ1ZmZVTDMyVi5nZXRVaW50MzIoMCwgdHJ1ZSk7XG5cbiAgICAgICAgY29uc3QgYnVmZiA9IGJSMWNzLnNsaWNlKGJSMWNzUG9zLCBiUjFjc1BvcyArICg0K3IxY3MubjgpKm5JZHggKTtcbiAgICAgICAgYlIxY3NQb3MgKz0gKDQrcjFjcy5uOCkqbklkeDtcbiAgICAgICAgY29uc3QgYnVmZlYgPSBuZXcgRGF0YVZpZXcoYnVmZi5idWZmZXIpO1xuICAgICAgICBmb3IgKGxldCBpPTA7IGk8bklkeDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBpZHggPSBidWZmVi5nZXRVaW50MzIoaSooNCtyMWNzLm44KSwgdHJ1ZSk7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSByMWNzLkYuZnJvbVJwckxFKGJ1ZmYsIGkqKDQrcjFjcy5uOCkrNCk7XG4gICAgICAgICAgICBsY1tpZHhdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsYztcbiAgICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkTWFwKGZkLCBzZWN0aW9ucywgcjFjcywgbG9nZ2VyLCBsb2dnZXJDdHgpIHtcbiAgICBsZXQgb3B0aW9ucztcbiAgICBpZiAodHlwZW9mIGxvZ2dlciA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBvcHRpb25zID0gbG9nZ2VyO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxvZ2dlciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBvcHRpb25zPSB7fTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgbG9nZ2VyOiBsb2dnZXIsXG4gICAgICAgICAgICBsb2dnZXJDdHg6IGxvZ2dlckN0eCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgYk1hcCA9IGF3YWl0IGJpbkZpbGVVdGlscy5yZWFkU2VjdGlvbihmZCwgc2VjdGlvbnMsIDMpO1xuICAgIGxldCBiTWFwUG9zID0gMDtcbiAgICBsZXQgbWFwO1xuXG4gICAgaWYgKHIxY3MublZhcnM+MTw8MjApIHtcbiAgICAgICAgbWFwID0gbmV3IEJpZ0FycmF5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbWFwID0gW107XG4gICAgfVxuICAgIGZvciAobGV0IGk9MDsgaTxyMWNzLm5WYXJzOyBpKyspIHtcbiAgICAgICAgaWYgKChvcHRpb25zLmxvZ2dlcikmJihpJTEwMDAwID09IDApKSBvcHRpb25zLmxvZ2dlci5pbmZvKGAke29wdGlvbnMubG9nZ2VyQ3R4fTogTG9hZGluZyBtYXA6ICR7aX0vJHtyMWNzLm5WYXJzfWApO1xuICAgICAgICBjb25zdCBpZHggPSByZWFkVUxFNjQoKTtcbiAgICAgICAgbWFwLnB1c2goaWR4KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWFwO1xuXG4gICAgZnVuY3Rpb24gcmVhZFVMRTY0KCkge1xuICAgICAgICBjb25zdCBidWZmVUxFNjQgPSBiTWFwLnNsaWNlKGJNYXBQb3MsIGJNYXBQb3MrOCk7XG4gICAgICAgIGJNYXBQb3MgKz0gODtcbiAgICAgICAgY29uc3QgYnVmZlVMRTY0ViA9IG5ldyBEYXRhVmlldyhidWZmVUxFNjQuYnVmZmVyKTtcbiAgICAgICAgY29uc3QgTFNCID0gYnVmZlVMRTY0Vi5nZXRVaW50MzIoMCwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IE1TQiA9IGJ1ZmZVTEU2NFYuZ2V0VWludDMyKDQsIHRydWUpO1xuXG4gICAgICAgIHJldHVybiBNU0IgKiAweDEwMDAwMDAwMCArIExTQjtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRSMWNzRmQoZmQsIHNlY3Rpb25zLCBvcHRpb25zKSB7XG4gICAgLyoqXG4gICAgICogT3B0aW9ucyBwcm9wZXJ0aWVzOlxuICAgICAqICBsb2FkQ29uc3RyYWludHM6IDxib29sPiB0cnVlIGJ5IGRlZmF1bHRcbiAgICAgKiAgbG9hZE1hcDogICAgICAgICA8Ym9vbD4gZmFsc2UgYnkgZGVmYXVsdFxuICAgICAqICBsb2FkQ3VzdG9tR2F0ZXM6IDxib29sPiB0cnVlIGJ5IGRlZmF1bHRcbiAgICAgKi9cblxuICAgIGlmKHR5cGVvZiBvcHRpb25zICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInJlYWRSMWNzRmQ6IG9wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3RcIik7XG4gICAgfVxuXG4gICAgb3B0aW9ucy5sb2FkQ29uc3RyYWludHMgPSBcImxvYWRDb25zdHJhaW50c1wiIGluIG9wdGlvbnMgPyBvcHRpb25zLmxvYWRDb25zdHJhaW50cyA6IHRydWU7XG4gICAgb3B0aW9ucy5sb2FkTWFwID0gXCJsb2FkTWFwXCIgaW4gb3B0aW9ucyA/IG9wdGlvbnMubG9hZE1hcCA6IGZhbHNlO1xuICAgIG9wdGlvbnMubG9hZEN1c3RvbUdhdGVzID0gXCJsb2FkQ3VzdG9tR2F0ZXNcIiBpbiBvcHRpb25zID8gb3B0aW9ucy5sb2FkQ3VzdG9tR2F0ZXMgOiB0cnVlO1xuXG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVhZFIxY3NIZWFkZXIoZmQsIHNlY3Rpb25zLCBvcHRpb25zKTtcblxuICAgIGlmIChvcHRpb25zLmxvYWRDb25zdHJhaW50cykge1xuICAgICAgICByZXMuY29uc3RyYWludHMgPSBhd2FpdCByZWFkQ29uc3RyYWludHMoZmQsIHNlY3Rpb25zLCByZXMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8vIFJlYWQgTGFiZWxzXG5cbiAgICBpZiAob3B0aW9ucy5sb2FkTWFwKSB7XG4gICAgICAgIHJlcy5tYXAgPSBhd2FpdCByZWFkTWFwKGZkLCBzZWN0aW9ucywgcmVzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5sb2FkQ3VzdG9tR2F0ZXMpIHtcbiAgICAgICAgaWYgKHJlcy51c2VDdXN0b21HYXRlcykge1xuICAgICAgICAgICAgcmVzLmN1c3RvbUdhdGVzID0gYXdhaXQgcmVhZEN1c3RvbUdhdGVzTGlzdFNlY3Rpb24oZmQsIHNlY3Rpb25zLCByZXMpO1xuICAgICAgICAgICAgcmVzLmN1c3RvbUdhdGVzVXNlcyA9IGF3YWl0IHJlYWRDdXN0b21HYXRlc1VzZXNTZWN0aW9uKGZkLCBzZWN0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMuY3VzdG9tR2F0ZXMgPSBbXTtcbiAgICAgICAgICAgIHJlcy5jdXN0b21HYXRlc1VzZXMgPSBbXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZFIxY3MoZmlsZU5hbWUsIGxvYWRDb25zdHJhaW50cywgbG9hZE1hcCwgc2luZ2xlVGhyZWFkLCBsb2dnZXIsIGxvZ2dlckN0eCkge1xuICAgIGxldCBvcHRpb25zO1xuICAgIGlmICh0eXBlb2YgbG9hZENvbnN0cmFpbnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIG9wdGlvbnMgPSBsb2FkQ29uc3RyYWludHM7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbG9hZENvbnN0cmFpbnRzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIG9wdGlvbnM9IHtcbiAgICAgICAgICAgIGxvYWRDb25zdHJhaW50czogdHJ1ZSxcbiAgICAgICAgICAgIGxvYWRNYXA6IGZhbHNlLFxuICAgICAgICAgICAgbG9hZEN1c3RvbUdhdGVzOiB0cnVlXG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGxvYWRDb25zdHJhaW50czogbG9hZENvbnN0cmFpbnRzLFxuICAgICAgICAgICAgbG9hZE1hcDogbG9hZE1hcCxcbiAgICAgICAgICAgIHNpbmdsZVRocmVhZDogc2luZ2xlVGhyZWFkLFxuICAgICAgICAgICAgbG9nZ2VyOiBsb2dnZXIsXG4gICAgICAgICAgICBsb2dnZXJDdHg6IGxvZ2dlckN0eFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHtmZCwgc2VjdGlvbnN9ID0gYXdhaXQgYmluRmlsZVV0aWxzLnJlYWRCaW5GaWxlKGZpbGVOYW1lLCBcInIxY3NcIiwgMSwgMTw8MjUsIDE8PDIyKTtcblxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlYWRSMWNzRmQoZmQsIHNlY3Rpb25zLCBvcHRpb25zKTtcblxuICAgIGF3YWl0IGZkLmNsb3NlKCk7XG5cbiAgICByZXR1cm4gcmVzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZEN1c3RvbUdhdGVzTGlzdFNlY3Rpb24oZmQsIHNlY3Rpb25zLCByZXMpIHtcbiAgICBhd2FpdCBiaW5GaWxlVXRpbHMuc3RhcnRSZWFkVW5pcXVlU2VjdGlvbihmZCwgc2VjdGlvbnMsIFIxQ1NfRklMRV9DVVNUT01fR0FURVNfTElTVF9TRUNUSU9OKTtcblxuICAgIGxldCBudW0gPSBhd2FpdCBmZC5yZWFkVUxFMzIoKTtcblxuICAgIGxldCBjdXN0b21HYXRlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtOyBpKyspIHtcbiAgICAgICAgbGV0IGN1c3RvbUdhdGUgPSB7fTtcbiAgICAgICAgY3VzdG9tR2F0ZS50ZW1wbGF0ZU5hbWUgPSBhd2FpdCBmZC5yZWFkU3RyaW5nKCk7XG4gICAgICAgIGxldCBudW1QYXJhbWV0ZXJzID0gYXdhaXQgZmQucmVhZFVMRTMyKCk7XG5cbiAgICAgICAgY3VzdG9tR2F0ZS5wYXJhbWV0ZXJzID0gQXJyYXkobnVtUGFyYW1ldGVycyk7XG4gICAgICAgIGxldCBidWZmID0gYXdhaXQgZmQucmVhZChyZXMubjggKiBudW1QYXJhbWV0ZXJzKTtcblxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG51bVBhcmFtZXRlcnM7IGorKykge1xuICAgICAgICAgICAgY3VzdG9tR2F0ZS5wYXJhbWV0ZXJzW2pdID0gcmVzLkYuZnJvbVJwckxFKGJ1ZmYsIGogKiByZXMubjgsIHJlcy5uOCk7O1xuICAgICAgICB9XG4gICAgICAgIGN1c3RvbUdhdGVzLnB1c2goY3VzdG9tR2F0ZSk7XG4gICAgfVxuICAgIGF3YWl0IGJpbkZpbGVVdGlscy5lbmRSZWFkU2VjdGlvbihmZCk7XG5cbiAgICByZXR1cm4gY3VzdG9tR2F0ZXM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkQ3VzdG9tR2F0ZXNVc2VzU2VjdGlvbihmZCxzZWN0aW9ucywgb3B0aW9ucykge1xuICAgIGNvbnN0IGJSMWNzID0gYXdhaXQgYmluRmlsZVV0aWxzLnJlYWRTZWN0aW9uKGZkLCBzZWN0aW9ucywgUjFDU19GSUxFX0NVU1RPTV9HQVRFU19VU0VTX1NFQ1RJT04pO1xuICAgIGNvbnN0IGJSMWNzMzIgPSBuZXcgVWludDMyQXJyYXkoYlIxY3MuYnVmZmVyLCBiUjFjcy5ieXRlT2Zmc2V0LCBiUjFjcy5ieXRlTGVuZ3RoLzQpO1xuICAgIGNvbnN0IG5DdXN0b21HYXRlVXNlcyA9IGJSMWNzMzJbMF07XG4gICAgbGV0IGJSMWNzUG9zID0gMTtcbiAgICBsZXQgY3VzdG9tR2F0ZXNVc2VzO1xuICAgIGlmIChuQ3VzdG9tR2F0ZVVzZXM+MTw8MjApIHtcbiAgICAgICAgY3VzdG9tR2F0ZXNVc2VzID0gbmV3IEJpZ0FycmF5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY3VzdG9tR2F0ZXNVc2VzID0gW107XG4gICAgfVxuICAgIGZvciAobGV0IGk9MDsgaTxuQ3VzdG9tR2F0ZVVzZXM7IGkrKykge1xuICAgICAgICBpZiAoKG9wdGlvbnMubG9nZ2VyKSYmKGklMTAwMDAwID09IDApKSBvcHRpb25zLmxvZ2dlci5pbmZvKGAke29wdGlvbnMubG9nZ2VyQ3R4fTogTG9hZGluZyBjdXN0b20gZ2F0ZSB1c2VzOiAke2l9LyR7bkN1c3RvbUdhdGVVc2VzfWApO1xuICAgICAgICBsZXQgYyA9IHt9O1xuICAgICAgICBjLmlkID0gYlIxY3MzMltiUjFjc1BvcysrXTtcbiAgICAgICAgbGV0IG51bVNpZ25hbHMgPSBiUjFjczMyW2JSMWNzUG9zKytdO1xuICAgICAgICBjLnNpZ25hbHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW1TaWduYWxzOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IExTQiA9IGJSMWNzMzJbYlIxY3NQb3MrK107XG4gICAgICAgICAgICBjb25zdCBNU0IgPSBiUjFjczMyW2JSMWNzUG9zKytdO1xuICAgICAgICAgICAgYy5zaWduYWxzLnB1c2goTVNCICogMHgxMDAwMDAwMDAgKyBMU0IpO1xuICAgICAgICB9XG4gICAgICAgIGN1c3RvbUdhdGVzVXNlcy5wdXNoKGMpO1xuICAgIH1cbiAgICByZXR1cm4gY3VzdG9tR2F0ZXNVc2VzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd3JpdGVSMWNzSGVhZGVyKGZkLCBjaXIpIHtcbiAgICBhd2FpdCBiaW5GaWxlVXRpbHMuc3RhcnRXcml0ZVNlY3Rpb24oZmQsIDEpO1xuICAgIGF3YWl0IGZkLndyaXRlVUxFMzIoY2lyLm44KTsgLy8gVGVtcG9yYWxseSBzZXQgdG8gMCBsZW5ndGhcbiAgICBhd2FpdCBiaW5GaWxlVXRpbHMud3JpdGVCaWdJbnQoZmQsIGNpci5wcmltZSwgY2lyLm44KTtcblxuICAgIGF3YWl0IGZkLndyaXRlVUxFMzIoY2lyLm5WYXJzKTtcbiAgICBhd2FpdCBmZC53cml0ZVVMRTMyKGNpci5uT3V0cHV0cyk7XG4gICAgYXdhaXQgZmQud3JpdGVVTEUzMihjaXIublB1YklucHV0cyk7XG4gICAgYXdhaXQgZmQud3JpdGVVTEUzMihjaXIublBydklucHV0cyk7XG4gICAgYXdhaXQgZmQud3JpdGVVTEU2NChjaXIubkxhYmVscyk7XG4gICAgYXdhaXQgZmQud3JpdGVVTEUzMihjaXIuY29uc3RyYWludHMubGVuZ3RoKTtcblxuICAgIGF3YWl0IGJpbkZpbGVVdGlscy5lbmRXcml0ZVNlY3Rpb24oZmQpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd3JpdGVSMWNzQ29uc3RyYWludHMoZmQsIGNpciwgbG9nZ2VyLCBsb2dnZXJDdHgpIHtcbiAgICBhd2FpdCBiaW5GaWxlVXRpbHMuc3RhcnRXcml0ZVNlY3Rpb24oZmQsIDIpO1xuXG4gICAgZm9yIChsZXQgaT0wOyBpPGNpci5jb25zdHJhaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoKGxvZ2dlcikmJihpJTEwMDAwID09IDApKSBsb2dnZXIuaW5mbyhgJHtsb2dnZXJDdHh9OiB3cml0aW5nIGNvbnN0cmFpbnQ6ICR7aX0vJHtjaXIuY29uc3RyYWludHMubGVuZ3RofWApO1xuICAgICAgICBhd2FpdCB3cml0ZUNvbnN0cmFpbnQoY2lyLmNvbnN0cmFpbnRzW2ldKTtcbiAgICB9XG5cbiAgICBhd2FpdCBiaW5GaWxlVXRpbHMuZW5kV3JpdGVTZWN0aW9uKGZkKTtcblxuXG4gICAgZnVuY3Rpb24gd3JpdGVDb25zdHJhaW50KGMpIHtcbiAgICAgICAgY29uc3QgbjggPSBjaXIubjg7XG4gICAgICAgIGNvbnN0IEYgPSBjaXIuRiB8fCBjaXIuY3VydmUuRnI7XG4gICAgICAgIGNvbnN0IGlkeEEgPSBPYmplY3Qua2V5cyhjWzBdKTtcbiAgICAgICAgY29uc3QgaWR4QiA9IE9iamVjdC5rZXlzKGNbMV0pO1xuICAgICAgICBjb25zdCBpZHhDID0gT2JqZWN0LmtleXMoY1syXSk7XG4gICAgICAgIGNvbnN0IGJ1ZmYgPSBuZXcgVWludDhBcnJheSgoaWR4QS5sZW5ndGgraWR4Qi5sZW5ndGgraWR4Qy5sZW5ndGgpKihuOCs0KSArIDEyKTtcbiAgICAgICAgY29uc3QgYnVmZlYgPSBuZXcgRGF0YVZpZXcoYnVmZi5idWZmZXIpO1xuICAgICAgICBsZXQgbz0wO1xuXG4gICAgICAgIGJ1ZmZWLnNldFVpbnQzMihvLCBpZHhBLmxlbmd0aCwgdHJ1ZSk7IG8rPTQ7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaTxpZHhBLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjb2VmID0gaWR4QVtpXTtcbiAgICAgICAgICAgIGJ1ZmZWLnNldFVpbnQzMihvLCBjb2VmLCB0cnVlKTsgbys9NDtcbiAgICAgICAgICAgIEYudG9ScHJMRShidWZmLCBvLCBjWzBdW2NvZWZdKTsgbys9bjg7XG4gICAgICAgIH1cblxuICAgICAgICBidWZmVi5zZXRVaW50MzIobywgaWR4Qi5sZW5ndGgsIHRydWUpOyBvKz00O1xuICAgICAgICBmb3IgKGxldCBpPTA7IGk8aWR4Qi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY29lZiA9IGlkeEJbaV07XG4gICAgICAgICAgICBidWZmVi5zZXRVaW50MzIobywgY29lZiwgdHJ1ZSk7IG8rPTQ7XG4gICAgICAgICAgICBGLnRvUnByTEUoYnVmZiwgbywgY1sxXVtjb2VmXSk7IG8rPW44O1xuICAgICAgICB9XG5cbiAgICAgICAgYnVmZlYuc2V0VWludDMyKG8sIGlkeEMubGVuZ3RoLCB0cnVlKTsgbys9NDtcbiAgICAgICAgZm9yIChsZXQgaT0wOyBpPGlkeEMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvZWYgPSBpZHhDW2ldO1xuICAgICAgICAgICAgYnVmZlYuc2V0VWludDMyKG8sIGNvZWYsIHRydWUpOyBvKz00O1xuICAgICAgICAgICAgRi50b1JwckxFKGJ1ZmYsIG8sIGNbMl1bY29lZl0pOyBvKz1uODtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmZC53cml0ZShidWZmKTtcbiAgICB9XG5cbn1cblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd3JpdGVSMWNzTWFwKGZkLCBjaXIsIGxvZ2dlciwgbG9nZ2VyQ3R4KSB7XG4gICAgYXdhaXQgYmluRmlsZVV0aWxzLnN0YXJ0V3JpdGVTZWN0aW9uKGZkLCAzKTtcblxuICAgIGlmIChjaXIubWFwLmxlbmd0aCAhPSBjaXIublZhcnMpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbWFwIHNpemVcIik7XG4gICAgZm9yIChsZXQgaT0wOyBpPGNpci5uVmFyczsgaSsrKSB7XG4gICAgICAgIGlmICgobG9nZ2VyKSYmKGklMTAwMDAgPT0gMCkpIGxvZ2dlci5pbmZvKGAke2xvZ2dlckN0eH06IHdyaXRpbmcgbWFwOiAke2l9LyR7Y2lyLm5WYXJzfWApO1xuICAgICAgICBhd2FpdCBmZC53cml0ZVVMRTY0KGNpci5tYXBbaV0pO1xuICAgIH1cblxuICAgIGF3YWl0IGJpbkZpbGVVdGlscy5lbmRXcml0ZVNlY3Rpb24oZmQpO1xufVxuXG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdyaXRlUjFjcyhmaWxlTmFtZSwgY2lyLCBsb2dnZXIsIGxvZ2dlckN0eCkge1xuXG4gICAgY29uc3QgZmQgPSBhd2FpdCBiaW5GaWxlVXRpbHMuY3JlYXRlQmluRmlsZShmaWxlTmFtZSwgXCJyMWNzXCIsIDEsIDMsIDE8PDI1LCAxPDwyMik7XG5cbiAgICBhd2FpdCB3cml0ZVIxY3NIZWFkZXIoZmQsIGNpcik7XG5cbiAgICBhd2FpdCB3cml0ZVIxY3NDb25zdHJhaW50cyhmZCwgY2lyLCBsb2dnZXIsIGxvZ2dlckN0eCk7XG5cbiAgICBhd2FpdCB3cml0ZVIxY3NNYXAoZmQsIGNpciwgbG9nZ2VyLCBsb2dnZXJDdHgpO1xuXG4gICAgYXdhaXQgZmQuY2xvc2UoKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../backend/node_modules/r1csfile/src/r1csfile.js\n");

/***/ })

};
;